<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <title>Document</title>

  <script>
    
    // location.reload()
    if(!sessionStorage.getItem("username")){
      window.location.href ="signin.html"
    }

    var OPTION_ARRAY = {
      "First": [101, 102, 103, 104, 105],
      "Second": [201, 202, 203, 204, 205],
      "Third": [301, 302, 303, 304, 305],
      "Fourth": [401, 402, 403, 404, 405]
    };

    function cleanSelect2() {
      var e1 = document.getElementById('shop');
      // e1.length = 0;
      e1.innerText = null;
    }

    function fillSelect2(value) {
      // console.log(value);
      var values = OPTION_ARRAY[value];
      var e2 = document.getElementById('shop');
      setDropDownData(e2, values);
      localStorage.setItem("passVal", e2.value)
    }

  </script>

</head>

<body class="">
  <div id="nav"></div>
  <div class="flex justify-center items-center h-screen bg-blue-100">

    <div class="w-96 p-6 shadow-2xl bg-white rounded-lg text-black">
      <h1 class="text-3xl  text-center font-semibold">Select Shop</h1>
      <hr class="mt-3" />
      <div class="mt-5">
        <form action="" id="formid">
          <label class="block text-base mb-2">Select Floor</label>
          <select class="border focus:border-gray-500 w-full text-base px-2 py-1" id="floor">
          </select>
      </div>
      <div class="mt-5">
        <label class="block text-base mb-2">Select Shop No</label>
        <select class="border focus:border-gray-500 w-full text-base px-2 py-1" id="shop">

        </select>
        </form>
      </div>

      <div class="mt-8 flex justify-center items-center">
        <button onclick="go()"
          class="border-2 border-green-500 bg-green-500 rounded-md text-white hover:bg-transparent hover:text-green-700 py-1 w-[48%] ">
          Go</button>
      </div>
    </div>
  </div>

  <script>

    $(function () {
      $("#nav").load("navbar.html");
    });

    function go() {
      window.location.href = "shop_details.html"
    }

    function changeFirstDropDown() {
      cleanSelect2();
      fillSelect2(this.value);
    }
    var e1 = document.getElementById("floor");
    var values = Object.keys(OPTION_ARRAY);

    e1.addEventListener("change", changeFirstDropDown, false);
    var e2 = document.getElementById('shop');

    setDropDownData(e1, values);
    fillSelect2("First");
    function setDropDownData(element, values) {
      for (let index = 0; index < values.length; index++) {
        var option = document.createElement("option");
        option.value = values[index];
        option.text = values[index];
        element.appendChild(option);
      }
    }
    e2.addEventListener("change", function () {
      let selectedShop = e2.value;
      console.log("Selected Shop:", selectedShop);
      localStorage.setItem("passVal", selectedShop)
    });
  </script>
</body>

</html>